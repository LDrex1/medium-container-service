name: Continous Validation and Integration
on:
  push:
    branches: [main, staging]
jobs:
  validation:
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: bash
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Code Linting
        id: lint
        uses: super-linter/super-linter@v7.4.0
        env:
          GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
          VALIDATE_JSX_PRETTIER: false
          VALIDATE_MARKDOWN_PRETTIER: false
          VALIDATE_YAML_PRETTIER: false
          VALIDATE_HTML_PRETTIER: false
          VALIDATE_JAVASCRIPT_PRETTIER: false
          VALIDATE_JSON_PRETTIER: false
          VALIDATE_CSS_PRETTIER: false
          VALIDATE_CSS: false
          VALIDATE_ENV: false
          VALIDATE_MARKDOWN: false
          VALIDATE_NATURAL_LANGUAGE: false
          DISABLE_ERRORS: true

      - name: Post Lint Summary to PR
        if: ${{ github.event_name == 'pull_request' }}
        uses: actions/github-script@v7
        with:
          script: |
            const output = #### Code Linting results \${{steps.lint.outcome}}\


            <details><summary>Show Lint Result</summary>
            \\\\n
            ${{job.status}}
            \\\\n
            </details>
            *Pushed by @${{github.actor}}, Action: \${{github.event_name}}\*;

            github.rest.issues.createComment{{
            issue_number: context.issue.number
            owner: context.repo.owner
            repo: context.repo.repo
            body: output
            }}
